

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>birchrest.middlewares package &mdash; birchrest 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8d563738"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="birchrest.routes package" href="birchrest.routes.html" />
    <link rel="prev" title="birchrest.http package" href="birchrest.http.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            birchrest
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">birchrest</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="birchrest.html">birchrest package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="birchrest.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="birchrest.app.html">birchrest.app package</a></li>
<li class="toctree-l4"><a class="reference internal" href="birchrest.decorators.html">birchrest.decorators package</a></li>
<li class="toctree-l4"><a class="reference internal" href="birchrest.exceptions.html">birchrest.exceptions package</a></li>
<li class="toctree-l4"><a class="reference internal" href="birchrest.http.html">birchrest.http package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">birchrest.middlewares package</a></li>
<li class="toctree-l4"><a class="reference internal" href="birchrest.routes.html">birchrest.routes package</a></li>
<li class="toctree-l4"><a class="reference internal" href="birchrest.types.html">birchrest.types package</a></li>
<li class="toctree-l4"><a class="reference internal" href="birchrest.unittest.html">birchrest.unittest package</a></li>
<li class="toctree-l4"><a class="reference internal" href="birchrest.utils.html">birchrest.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="birchrest.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="birchrest.html#module-birchrest.core">birchrest.core module</a></li>
<li class="toctree-l3"><a class="reference internal" href="birchrest.html#module-birchrest.version">birchrest.version module</a></li>
<li class="toctree-l3"><a class="reference internal" href="birchrest.html#module-birchrest">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">birchrest</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">birchrest</a></li>
          <li class="breadcrumb-item"><a href="birchrest.html">birchrest package</a></li>
      <li class="breadcrumb-item active">birchrest.middlewares package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/birchrest.middlewares.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="birchrest-middlewares-package">
<h1>birchrest.middlewares package<a class="headerlink" href="#birchrest-middlewares-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-birchrest.middlewares.cors">
<span id="birchrest-middlewares-cors-module"></span><h2>birchrest.middlewares.cors module<a class="headerlink" href="#module-birchrest.middlewares.cors" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="birchrest.middlewares.cors.Cors">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">birchrest.middlewares.cors.</span></span><span class="sig-name descname"><span class="pre">Cors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">allow_origins</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['*']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_methods</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['GET',</span> <span class="pre">'POST',</span> <span class="pre">'PUT',</span> <span class="pre">'DELETE',</span> <span class="pre">'PATCH',</span> <span class="pre">'OPTIONS']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_headers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['Content-Type',</span> <span class="pre">'Authorization']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_credentials</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_age</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">86400</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/birchrest/middlewares/cors.html#Cors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#birchrest.middlewares.cors.Cors" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Middleware for handling Cross-Origin Resource Sharing (CORS) in HTTP requests.</p>
<p>This middleware ensures that the server can respond to cross-origin requests by
controlling which origins, methods, and headers are allowed. It also handles
preflight requests (OPTIONS method) for HTTP requests that require complex CORS
handling, such as when using methods other than GET or POST or custom headers.</p>
<p>The CORS settings, such as allowed origins, methods, and headers, can be configured
when initializing the middleware. By default, it allows all origins, commonly used
methods, and a few standard headers.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><p>allow_origins (List[str]): List of allowed origins. Defaults to [“*”], allowing all origins.
allow_methods (List[str]): List of allowed HTTP methods. Defaults to common methods like GET, POST, PUT, DELETE, etc.
allow_headers (List[str]): List of allowed request headers. Defaults to [“Content-Type”, “Authorization”].
allow_credentials (bool): Whether or not to allow credentials (cookies, HTTP authentication, etc.). Defaults to False.
max_age (int): How long the results of a preflight request can be cached (in seconds). Defaults to 86400 seconds (24 hours).</p>
</dd>
<dt>Methods:</dt><dd><p>__call__(req, res, next): Main entry point for the middleware. Adds the appropriate CORS headers to the response based on the request.
_handle_preflight(origin, res): Handles preflight (OPTIONS) requests by responding with the appropriate CORS headers.
_add_cors_headers(origin, res): Adds CORS headers to the response for non-OPTIONS requests.
_is_origin_allowed(origin): Checks if the origin is allowed based on the allow_origins setting.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-birchrest.middlewares.logger">
<span id="birchrest-middlewares-logger-module"></span><h2>birchrest.middlewares.logger module<a class="headerlink" href="#module-birchrest.middlewares.logger" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="birchrest.middlewares.logger.Logger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">birchrest.middlewares.logger.</span></span><span class="sig-name descname"><span class="pre">Logger</span></span><a class="reference internal" href="_modules/birchrest/middlewares/logger.html#Logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#birchrest.middlewares.logger.Logger" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Middleware to log incoming requests and outgoing responses with enhanced formatting and colors.
Logs useful information including request method, path, client address, correlation ID, response status, and time taken.</p>
</dd></dl>

</section>
<section id="module-birchrest.middlewares.rate_limiter">
<span id="birchrest-middlewares-rate-limiter-module"></span><h2>birchrest.middlewares.rate_limiter module<a class="headerlink" href="#module-birchrest.middlewares.rate_limiter" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="birchrest.middlewares.rate_limiter.RateLimiter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">birchrest.middlewares.rate_limiter.</span></span><span class="sig-name descname"><span class="pre">RateLimiter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_requests</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_seconds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/birchrest/middlewares/rate_limiter.html#RateLimiter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#birchrest.middlewares.rate_limiter.RateLimiter" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A rate-limiting middleware that limits the number of requests per
client (IP or token) within a specified time window.</p>
</dd></dl>

</section>
<section id="module-birchrest.middlewares">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-birchrest.middlewares" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="birchrest.middlewares.Cors">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">birchrest.middlewares.</span></span><span class="sig-name descname"><span class="pre">Cors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">allow_origins</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['*']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_methods</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['GET',</span> <span class="pre">'POST',</span> <span class="pre">'PUT',</span> <span class="pre">'DELETE',</span> <span class="pre">'PATCH',</span> <span class="pre">'OPTIONS']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_headers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['Content-Type',</span> <span class="pre">'Authorization']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_credentials</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_age</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">86400</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/birchrest/middlewares/cors.html#Cors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#birchrest.middlewares.Cors" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Middleware for handling Cross-Origin Resource Sharing (CORS) in HTTP requests.</p>
<p>This middleware ensures that the server can respond to cross-origin requests by
controlling which origins, methods, and headers are allowed. It also handles
preflight requests (OPTIONS method) for HTTP requests that require complex CORS
handling, such as when using methods other than GET or POST or custom headers.</p>
<p>The CORS settings, such as allowed origins, methods, and headers, can be configured
when initializing the middleware. By default, it allows all origins, commonly used
methods, and a few standard headers.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><p>allow_origins (List[str]): List of allowed origins. Defaults to [“*”], allowing all origins.
allow_methods (List[str]): List of allowed HTTP methods. Defaults to common methods like GET, POST, PUT, DELETE, etc.
allow_headers (List[str]): List of allowed request headers. Defaults to [“Content-Type”, “Authorization”].
allow_credentials (bool): Whether or not to allow credentials (cookies, HTTP authentication, etc.). Defaults to False.
max_age (int): How long the results of a preflight request can be cached (in seconds). Defaults to 86400 seconds (24 hours).</p>
</dd>
<dt>Methods:</dt><dd><p>__call__(req, res, next): Main entry point for the middleware. Adds the appropriate CORS headers to the response based on the request.
_handle_preflight(origin, res): Handles preflight (OPTIONS) requests by responding with the appropriate CORS headers.
_add_cors_headers(origin, res): Adds CORS headers to the response for non-OPTIONS requests.
_is_origin_allowed(origin): Checks if the origin is allowed based on the allow_origins setting.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="birchrest.middlewares.Logger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">birchrest.middlewares.</span></span><span class="sig-name descname"><span class="pre">Logger</span></span><a class="reference internal" href="_modules/birchrest/middlewares/logger.html#Logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#birchrest.middlewares.Logger" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Middleware to log incoming requests and outgoing responses with enhanced formatting and colors.
Logs useful information including request method, path, client address, correlation ID, response status, and time taken.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="birchrest.middlewares.RateLimiter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">birchrest.middlewares.</span></span><span class="sig-name descname"><span class="pre">RateLimiter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_requests</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_seconds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/birchrest/middlewares/rate_limiter.html#RateLimiter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#birchrest.middlewares.RateLimiter" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A rate-limiting middleware that limits the number of requests per
client (IP or token) within a specified time window.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="birchrest.http.html" class="btn btn-neutral float-left" title="birchrest.http package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="birchrest.routes.html" class="btn btn-neutral float-right" title="birchrest.routes package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Alexander Engström.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>